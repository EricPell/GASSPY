##########################
# Simulation parameters
##########################

# Maximum refinement level of simulation, defined such that dx = box_size / 2^(amr_lrefine)
amr_lrefine_max: 11
# Minimum refinement level of simulation
amr_lrefine_min: 6

# Scale length of the box size in CGS
sim_unit_length : 1.8729852524984215e+20 

# boxsize in x, y, z in sim_unit_length
sim_size_x : 1 
sim_size_y : 1 
sim_size_z : 1 

# Origin of simulation
origin: 
  - 0.5 
  - 0.5 
  - 0.5 

# Arguments to pass to the simulation reader
sim_reader_args:
  # in this specific case the reader only needs an output number 
  output_number : 51


##########################
# Database parameters
##########################

# Name of the database
database_name : gasspy_database.hdf5

# Path where to store the database
gasspy_modeldir : /path/to/modeldir/

# Names of the fields to use
database_fields: 
  - "cell_size"      # Cell size
  - "number_density" # Density
  - "temperature"    # temperature
  - "FUV"            # Fluxes
  - "HII"
  - "HeII"
  - "HeIII"

# Limits for the fields in logspace (in units assumed to be CGS)
# Should be a dictionary given as
#
# fieldname : 
#         min : minval    minimum value
#         max : maxcal    maximum value
#         min_cutoff_value : -99  Value to set cells lower than the minimum limit, if not present set to minval
#         max_cutoff_value :  99  Value to set cells higher than the maximum limit, if not present set to maxval

log10_field_limits:
  temperature  :        # For example, temperature
          min : 0.0     # Minimum of 1K
          max : 7.0     # maximum of 10^7 K
  FUV   :               # For fluxes (names can change) we may want fluxes below the cutoff to be set to nothing
          min : -8.0
          min_cutoff_value : -99
  HII   : 
          min : -8.0
          min_cutoff_value : -99
  HeII  : 
          min : -8.0
          min_cutoff_value : -99
  HeIII : 
          min : -8.0
          min_cutoff_value : -99

# Compression ratios for each of the fields in the models
compression_ratio:
  # number density
  number_density :
    - 1   # Decimal precision
    - 1.0 # compression ratio
  
  # temperature
  temperature :
    - 1
    - 5.0
  
  # cellsize
  cell_size:
    - 3
    - 1.0

  # Fluxes
  FUV:
    - 1
    - 1.0
  HII:
    - 1
    - 1.0
  HeII:
    - 1
    - 1.0
  HeIII:
    - 1
    - 1.0

# Fields for which we want to interpolate
interpolate_fields: 
  - "number_density"
  - "temperature"

# Save line emission and line opacity seperatly for these lines
line_labels : 
    -   "H  1 6562.80A"
    -   "H  1 4861.32A" 
# Only save lines (dont know why, but hey)
lines_only : False

# How often in seconds should we gather and save models that we have run. This is for 1) memory saving and 2) safer in case of crashes/forced exits
populator_dump_time: 1800 

# Optimistic estimate for how long a model takes in seconds. Used to set the buffers when running models
est_model_time : 60

# Maximum time we want to run in seconds, if this is reached, the code should exit safely and allow for restart
max_walltime : 1.0e+99

############################
# Cloudy parameters
############################    
# Path to ini file for cloudy
cloudy_ini : "/path/to/GASSPY/gasspy/physics/sourcefunction_database/cloudy/init_files/spec_postprocess_atomic_no_qheat-c17.ini"

# Path to cloudy directory
cloudy_path : "/path/to/cloudy/"

##########################
# Raytracer  parameters
##########################

# Position of the observer in units of box size
observer_center:
  - [0.61896426, 0.66178062, 0.69535435]

# point in space the observer looks towards from observer_center in units of box size
pov_center :
  - [0.51502489 , 0.51872035 , 0.5186332]

# The resolving power of the cells by the rays.
# defined such that ray projecter area <= ray_max_area_frac * dx_cell^2
ray_max_area_frac : 0.25

# Minimum and maximum ray refinement levels
ray_lrefine_min : 5
ray_lrefine_max : 13

# Distance from the observer results are ignored in cgs, usefull for removing block artefacts
ignore_within_distance : 1.543e+18

# Observer type: 
# plane : grid of parallell rays
# healpic : rays generated from central point 
observer_type : "plane"

###
# Plane observer settings
###
# Size of detector in units of boxsize
detector_size_x : 1
detector_size_y : 1

# Number of initial rays in each direction
Nxp : 512
Nyp : 512

# Assumed distance to the plane. Only used in calculating solid angles, not in the actual tracing
external_distance : 1.0e+13

###
# Healpix observer 
###

# Range of pixels to use at minimum refinement level. ONLY UNCOMMENT IF YOU WANT TO SELECT
# min_pix_lmin = 
# max_pix_lmin = 

#########################
# Radiative transfer parameters
#########################

# Energy limits of the spectra
# For full spectra RT these should only be specified if not all spectral bins are wanted
# In band RT these specify the bands used
#Elims : 
# Ha 6562A
     #- [0.1380, 0.13835]
     #- [0.13835, 0.1387]
     #- [0.1387, 0.1389] # line 6562
     #- [0.1389, 0.13925]
     #- [0.13925, 0.1396]
# Hb 4861A
     #- [0.1869, 0.187]
     #- [0.187, 0.18733]
     #- [0.18739, 0.187421] # line 4861
     #- [0.187561, 0.18777]
     #- [0.18777, 0.188]
# Dust
     #- [0.0011309464909455696, 0.0015348559519975588]
     #- [0.0004871836360589529, 0.0006860340997564845]
     #- [0.00020126485761731073, 0.000368985572298403]

###
# Band RT settings
###

# Specify what lines youÂ´ want to fit, and the indexes of the corresponging bands inside of Elims
# Format:
#   {line_label}:
#       start_index: starting index of bands inside of Elims
#       nbands: number of bands used for the line(s)
#       line_index: array of which bands correspond to the line(s).   Index in Elims = start_index+line_index
#       cont_index: array of which bands correspond to the continuum. Index in Elims = start_index+cont_index

#line_data : 
#    Ha_6562A :
#        start_index : 0
#        nbands : 5
#        line_index: [2] 
#        cont_index: [0,1,3,4]
#    Hb_4681A :
#        start_index : 5
#        nbands : 5
#        line_index: [2] 
#        cont_index: [0,1,3,4]

# bands that are used for broadband integration
#bband_data : 
    #cont_index : [10,11,12]


###
# Pre-processing parameters: Parameters used what adding in new flux bins to each cell
###
# path to file that defines where the sources are and how much they emit
sourcetable_path : "path/to/sourcetable.npy"
# Rotate the healpix observer to better converge
nrots_per_source : 1